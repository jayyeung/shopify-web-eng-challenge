(function(t){function e(e){for(var a,i,o=e[0],u=e[1],c=e[2],f=0,d=[];f<o.length;f++)i=o[f],n[i]&&d.push(n[i][0]),n[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);l&&l(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],a=!0,o=1;o<r.length;o++){var u=r[o];0!==n[u]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},n={app:0},s=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0f74":function(t,e,r){},"378c":function(t,e,r){"use strict";var a=r("7ef7"),n=r.n(a);n.a},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("097d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("banner",[t._v("Toronto Waste Lookup")]),r("div",{staticClass:"u-mb-5",attrs:{id:"main"}},[r("searchbar",{staticClass:"u-mt-3 u-mb-4",attrs:{placeholder:"Lookup waste (E.g. 'cardboard', 'takeout')",disabled:!t.loaded},on:{search:t.handleSearch}}),t.loaded?t._e():r("div",[t._v("LOADING...")]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.query&&t.searchRes.length<=0,expression:"query && searchRes.length<=0"}]},[t._v('\n      No results found for "'+t._s(t.query)+'"\n    ')]),r("div",{staticClass:"waste-entries"},t._l(t.searchRes,function(e,a){return r("waste-entry",{key:"result-"+a,attrs:{entry:e},on:{favourite:t.handleFavourite}})}),1)],1),r("div",{attrs:{id:"faves"}},[r("div",{staticClass:"o-container"},[r("h2",[t._v("Favourites")]),t.favourites.length<=0?r("p",[t._v("\n        You have no favourites :(\n      ")]):t._e(),r("div",{staticClass:"waste-entries u-mt-4"},t._l(t.favourites,function(e,a){return r("waste-entry",{key:"faves-"+a,attrs:{entry:e},on:{favourite:t.handleFavourite}})}),1)])])],1)},s=[],i=(r("6762"),r("2fdb"),r("ac6a"),r("954e")),o=r.n(i),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"banner"},[r("h1",{staticClass:"o-container"},[t._t("default")],2)])},c=[],l={name:"Banner"},f=l,d=(r("378c"),r("2877")),h=Object(d["a"])(f,u,c,!1,null,"f3866fa4",null);h.options.__file="Banner.vue";var p=h.exports,v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"entry"},[r("div",{staticClass:"entry__title",on:{click:t.onFavourite}},[r("div",{staticClass:"entry__star",class:{"entry__star--fave":this.entry.favourite}},[r("span",{staticClass:"o-icon-star"})]),r("p",{staticClass:"u-mh-3"},[t._v(t._s(t.entry.title))])]),r("div",{staticClass:"entry__desc",domProps:{innerHTML:t._s(t.entry.body)}})])},_=[],m={name:"WasteEntry",props:{entry:Object},methods:{onFavourite:function(){var t=!this.entry.favourite;this.$emit("favourite",t,this.entry)}}},b=m,y=(r("a362"),Object(d["a"])(b,v,_,!1,null,"32e9a1e7",null));y.options.__file="WasteEntry.vue";var w=y.exports,g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"searchbar",on:{submit:function(e){return e.preventDefault(),t.onSearch(e)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],staticClass:"searchbar__input u-mr-3",attrs:{type:"text",placeholder:t.placeholder,disabled:t.disabled},domProps:{value:t.searchInput},on:{input:function(e){e.target.composing||(t.searchInput=e.target.value)}}}),t._m(0)])},C=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"searchbar__button",attrs:{type:"submit"}},[r("span",{staticClass:"o-icon-search"})])}],O={name:"Searchbar",props:{disabled:Boolean,placeholder:String},data:function(){return{searchInput:""}},methods:{onSearch:function(){this.disabled||this.$emit("search",this.formatedInput)}},computed:{formatedInput:function(){return this.searchInput.trim().toLowerCase()}},watch:{searchInput:function(t){""===t&&this.onSearch()}}},x=O,S=(r("ae5d"),Object(d["a"])(x,g,C,!1,null,"03140de5",null));S.options.__file="Searchbar.vue";var j=S.exports,E="https://secure.toronto.ca/cc_sr_v1/data/swm_waste_wizard_APR?limit=1000",k={name:"app",components:{Banner:p,WasteEntry:w,Searchbar:j},data:function(){return{loaded:!1,query:"",apiData:[],searchRes:[],favourites:[]}},mounted:function(){var t=this;this.$http.get(E).then(function(e){t.apiData=e.data,t.loaded=!0}).catch(function(t){console.error("Fetching error occured:",t),alert("There was an error fetching the data. Please refresh the page and try again.")})},methods:{formatEntries:function(t){var e=this;return t.forEach(function(t){e.favourites.includes(t)?a["a"].set(t,"favourite",!0):a["a"].set(t,"favourite",!1),t.body=o()(t.body)}),t},handleSearch:function(t){t!==this.query&&(this.searchRes=""===t?[]:this.formatEntries(this.apiData.filter(function(e){return e.keywords.toLowerCase().includes(t)||e.title.toLowerCase().includes(t)})),this.query=t)},handleFavourite:function(t,e){if(t)this.favourites.push(e);else{var r=this.favourites.indexOf(e);-1!==r&&this.favourites.splice(r,1)}this.searchRes=this.formatEntries(this.searchRes)}}},I=k,P=(r("5c0b"),Object(d["a"])(I,n,s,!1,null,null,null));P.options.__file="App.vue";var $=P.exports,R=r("a7fe"),F=r.n(R),L=r("bc3a"),q=r.n(L);a["a"].use(F.a,q.a),a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t($)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var a=r("5e27"),n=r.n(a);n.a},"5e27":function(t,e,r){},"7ef7":function(t,e,r){},a362:function(t,e,r){"use strict";var a=r("d07d"),n=r.n(a);n.a},ae5d:function(t,e,r){"use strict";var a=r("0f74"),n=r.n(a);n.a},d07d:function(t,e,r){}});
//# sourceMappingURL=app.c859f40e.js.map